openapi: 3.1.0
info:
  title: Минимальное API памяти Софии
  version: 1.0.0
  description: |
    Компактная схема для публичных методов памяти. Описывает только базовые
    операции проверки доступности и записи/чтения заметок.
servers:
  - url: https://sofia-memory.onrender.com
    description: Публичный Render-инстанс
  - url: http://localhost:10000
    description: Локальный запуск для разработки
paths:
  /ping:
    get:
      summary: Проверка доступности сервиса
      description: Возвращает подтверждение, что сервер отвечает.
      operationId: ping
      responses:
        '200':
          description: Сервис доступен.
          content:
            application/json:
              schema:
                type: object
                required: [ok, message]
                properties:
                  ok:
                    type: boolean
                    description: Признак доступности сервиса.
                  message:
                    type: string
                    description: Ответ сервера.
              examples:
                success:
                  value:
                    ok: true
                    message: pong
  /api/memory/save:
    post:
      summary: Сохранение заметки в памяти
      description: Сохраняет переданный контент в файл памяти. Имя файла можно задать явно,
        по умолчанию используется `memory.json`.
      operationId: saveMemory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content]
              properties:
                fileName:
                  type: string
                  description: Имя файла для сохранения (например, `note.json`).
                content:
                  oneOf:
                    - type: string
                      description: Текстовое содержимое файла.
                    - type: object
                      description: Любой JSON-объект; будет сериализован при записи.
                  description: Содержимое файла.
            examples:
              default:
                value:
                  fileName: memory.json
                  content: "Запомни, что доклад в пятницу в 15:00"
      responses:
        '200':
          description: Заметка сохранена.
          content:
            application/json:
              schema:
                type: object
                required: [status, file]
                properties:
                  status:
                    type: string
                    description: Статус обработки запроса.
                  file:
                    type: string
                    description: Имя сохранённого файла.
              examples:
                success:
                  value:
                    status: ok
                    file: memory.json
        '400':
          description: Некорректные данные запроса.
  /api/memory/read:
    get:
      summary: Чтение заметки из памяти
      description: Возвращает содержимое сохранённого файла. Если имя не передано, используется `memory.json`.
      operationId: readMemory
      parameters:
        - in: query
          name: fileName
          required: false
          schema:
            type: string
          description: Имя файла для чтения (по умолчанию `memory.json`).
      responses:
        '200':
          description: Файл найден и возвращён.
          content:
            application/json:
              schema:
                type: object
                required: [status, file, content]
                properties:
                  status:
                    type: string
                    description: Статус обработки запроса.
                  file:
                    type: string
                    description: Имя файла.
                  content:
                    type: string
                    description: Содержимое файла в текстовом виде.
              examples:
                result:
                  value:
                    status: ok
                    file: memory.json
                    content: "Доклад в пятницу в 15:00"
        '404':
          description: Файл не найден.
          content:
            application/json:
              schema:
                type: object
                required: [status, message]
                properties:
                  status:
                    type: string
                    description: Код статуса ответа.
                  message:
                    type: string
                    description: Детали ошибки.
              example:
                status: not_found
                message: Файл не найден
        '500':
          description: Ошибка чтения файла.
          content:
            application/json:
              schema:
                type: object
                required: [status, message]
                properties:
                  status:
                    type: string
                    description: Код статуса ответа.
                  message:
                    type: string
                    description: Детали ошибки.
              example:
                status: error
                message: Не удалось прочитать файл
components:
  schemas: {}
