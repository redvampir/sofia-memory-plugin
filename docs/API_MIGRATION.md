# Миграция с легаси-эндпоинтов на новую схему API

В старых версиях плагина использовались короткие пути без пространства `/api`. Все они помечены как `deprecated` и будут удалены в версии **5.0.0**. При обращении к ним сервер возвращает заголовок `X-Deprecated-Endpoint: true` и сообщение с рекомендацией по переезду.

## Соответствие эндпоинтов

| Старый эндпоинт | Новый эндпоинт | Удаление | Комментарий |
| --- | --- | --- | --- |
| `POST /save` | `POST /api/files/save` | 5.0.0 | Унифицированное сохранение файлов памяти и контекста. |
| `POST /read` | `POST /api/files/read` | 5.0.0 | Чтение файлов памяти и контекста. |
| `POST /readFile` | `POST /api/files/read` | 5.0.0 | Используйте единый эндпоинт для чтения. |
| `POST /saveMemory` | `POST /api/memory/save` | 5.0.0 | Запись структурированных сущностей памяти. |
| `POST /readMemory` | `POST /api/memory/read` | 5.0.0 | Чтение сущностей памяти. |
| `GET /memory` | `GET /api/memory/read` | 5.0.0 | Возвращает содержимое и метаданные файла памяти. |
| `POST /saveMemoryWithIndex` | `POST /api/memory/save-with-index` | 5.0.0 | Одновременное сохранение и обновление индекса. |
| `POST /loadMemoryToContext` | `POST /api/memory/load-to-context` | 5.0.0 | Загрузка памяти в контекст. |
| `POST /loadContextFromIndex` | `POST /api/memory/load-from-index` | 5.0.0 | Восстановление контекста из индекса. |
| `POST /saveLessonPlan` | `POST /api/lessons/save-plan` | 5.0.0 | Сохранение планов уроков. |
| `POST /setMemoryRepo` | `POST /api/system/switch_repo` | 5.0.0 | Настройка целевого репозитория памяти. |
| `GET/POST /status` | `GET/POST /api/system/status` | 5.0.0 | Проверка состояния системы памяти. |

## Что делать клиентам

1. Перейти на новые пути `/api/...` — их контракты стабильны.
2. Убедиться, что интеграционные тесты используют новые эндпоинты.
3. Удалить использование легаси-путей до обновления на версию 5.0.0.
