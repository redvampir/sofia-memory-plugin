# Предложения по улучшению журнала уроков (со здоровым скепсисом)

Ниже — идеи, которые могут повысить надёжность и пригодность журнала уроков. Каждая сопровождается предупреждением о побочных эффектах, чтобы мы не увлеклись усложнением.

## 1. Поменять хранение с JSON-файла на компактную БД
**Идея:** перейти на SQLite/duckdb вместо `data/lessons.json` для атомарности и быстрой выборки.
**Скепсис:** тянуть СУБД ради пяти полей — риск переинжиниринга; придётся заводить миграции и следить за блокировками.

## 2. Ввести ротацию и резервные копии
**Идея:** держать актуальный файл + N копий (`lessons.json.bak-YYYYMMDD`) перед каждой записью.
**Скепсис:** дополнительные операции ввода‑вывода и место на диске; для небольшого объёма данных дешевле починить файл руками.

## 3. Строгая схема и статический контроль
**Идея:** описать JSON Schema и валидировать через готовую библиотеку, чтобы клиенты могли генерировать типы.
**Скепсис:** ещё одна зависимость и точка отказа; текущая ручная валидация проста и прозрачна.

## 4. Мониторинг целостности
**Идея:** добавить периодическую проверку файла (hash, попытка parse) и алерты при сбоях.
**Скепсис:** понадобится планировщик и канал уведомлений; для одиночного файла проще реагировать по факту ошибки 500.

## 5. Журнал изменений (audit trail)
**Идея:** писать append-only лог с историей правок `lesson_id` (кто и когда обновил).
**Скепсис:** без потребности в аудите мы только удвоим объём хранения и усложним очистку старых записей.

## 6. Конкурентные тесты
**Идея:** покрыть блокировку нагрузочными тестами с параллельными POST, чтобы поймать гонки.
**Скепсис:** придётся городить инфраструктуру для параллельных запросов; экономический эффект сомнителен при текущей нагрузке.

## 7. Нормализовать статус в конфиг
**Идея:** вынести перечисление статусов в `config/lesson-statuses.json` и поднимать сервер без правки кода.
**Скепсис:** риск десинхронизации с документацией и клиентами; выгодно только если статусами будут управлять неразработчики.

---
**Резюме:** если журнал останется вспомогательным инструментом, хватит текущей реализации + резервной копии. Если планируется рост нагрузки или критичность данных — стоит обдумать пункты 1, 4 и 6.
