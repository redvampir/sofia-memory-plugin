# API визуальных ссылок

Небольшой REST-интерфейс для хранения визуальных материалов (референсы). Записи сохраняются в `data/visuals.json`.

## Модель записи
- `type` — тип ресурса. Сейчас поддерживается только `sketch_reference`.
- `scene` — человекочитаемое название сцены/контекста.
- `image` — обязательный URL изображения (пустое значение приводит к `400`).
- `notes` — произвольные заметки (строка, опционально).
- `tags` — список тегов (строки, опционально).
- `created_at` — дата создания в формате ISO 8601, назначается сервером.

## POST `/visuals`
Создание новой записи.

### Тело запроса
```json
{
  "type": "sketch_reference",
  "scene": "Demo city",
  "image": "https://example.com/demo.png",
  "notes": "Сумерки и неон",
  "tags": ["city", "night"]
}
```

### Ответы
- `201` + объект записи при успехе.
- `400` при некорректных параметрах (например, пустой или неверный URL в `image`).
- `500` при ошибках чтения/записи файла.

## GET `/visuals`
Получение списка с фильтрацией. Все фильтры необязательные.

### Параметры запроса
- `scene` — точное совпадение по названию сцены.
- `type` — фильтр по типу (например, `sketch_reference`).
- `tags` — список тегов через запятую или повторяющийся параметр (`?tags=city,night` или `?tags=city&tags=night`).

### Пример запроса
```
GET /visuals?scene=Demo%20city&tags=night
```

### Ответ
```json
{
  "ok": true,
  "total": 1,
  "items": [
    {
      "type": "sketch_reference",
      "scene": "Demo city",
      "image": "https://example.com/demo.png",
      "notes": "Сумерки и неон",
      "tags": ["city", "night"],
      "created_at": "2024-04-01T12:00:00.000Z"
    }
  ]
}
```

## Логирование и ошибки
- Успешные операции создают записи вида `[VISUALS] Добавлена запись...` и `[VISUALS] Запрошен список...` в консоли.
- Ошибки валидации и IO логируются с тем же префиксом и возвращают человекочитаемые сообщения в JSON.
